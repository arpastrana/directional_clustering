language: python

# python versions to test in
python:
- "3.7"

before_install:
- pip install --upgrade pip
- pip install Cython --install-option="--no-cython-compile"

install:
# We do this conditionally because it saves us some downloading if the
# version is the same.
- wget https://repo.continuum.io/miniconda/Miniconda3-latest-Linux-x86_64.sh -O miniconda.sh;
- bash miniconda.sh -b -p $HOME/miniconda
- source "$HOME/miniconda/etc/profile.d/conda.sh"
- hash -r
- conda config --set always_yes yes --set changeps1 no
- conda update -q conda
- conda config --add channels conda-forge
# Useful for debugging any issues with conda
- conda info -a

# Replace dep1 dep2 ... with your dependencies
- conda create -q -n test-environment python=$TRAVIS_PYTHON_VERSION COMPAS=1.8.1 igl
- conda activate test-environment
- python -m pip install .
- pip install --no-cache-dir -r requirements-dev.txt

# this will run all tests in the ./tests folder 
script:
- invoke test

# safe list (specifies what branches to build on github)
branches:
  only:
  - master
  - develop
